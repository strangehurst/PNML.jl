# Ideas from MathML.jl

#TODO: use pnml tag names instead of mathml?
"""
$(TYPEDEF)
"""
applymap = Dict{String,Function}(
    "times" => Base.prod, # arity 2, but prod fine
    # "prod" => Base.prod,
    "divide" => x -> Base.:/(x...),
    "power" => x -> Base.:^(x...),
    "plus" => x -> Base.:+(x...),
    "minus" => x -> Base.:-(x...),
    # Lots more functions possible
)


"""
Map XML tag names to parser functions.

$(TYPEDEF)
"""
tagmap = Dict{String,Function}(
    # Assumes all child elements have an entry in tagmap
    #""  => x -> map(parse_node, elements(x)),

    "add" => unclaimed_label,
    "addition" => unclaimed_label,
    "all" => unclaimed_label,
    "and" => parse_and,
    "anyName" => unclaimed_label,
    "arbitraryoperator" => parse_arbitraryoperator,
    "arbitrarysort" => parse_arbitrarysort,
    "arc"  => parse_arc,
    "arctype" => unclaimed_label,
    "attribute" => unclaimed_label,
    "bool" => parse_bool,
    "bool" => unclaimed_label,
    "booleanconstant" => parse_booleanconstant,
    "cardinality" => unclaimed_label,
    "cardinalityof" => unclaimed_label,
    "choice" => unclaimed_label,
    "condition" => parse_condition,
    "cyclicenumeration" => unclaimed_label,
    "data" => unclaimed_label,
    "declaration" => parse_declaration,
    "declarations"  => parse_declarations,
    "def" => unclaimed_label,
    "define" => unclaimed_label,
    "dimension" => unclaimed_label,
    "div" => unclaimed_label,
    "dot" => unclaimed_label,
    "dotconstant" => unclaimed_label,
    "element" => unclaimed_label,
    "empty" => unclaimed_label,
    "emptylist" => unclaimed_label,
    "equality" => parse_equality,
    "except" => unclaimed_label,
    "externalRef" => unclaimed_label,
    "feconstant" => unclaimed_label,
    "fill" => unclaimed_label,
    "finiteenumeration" => unclaimed_label,
    "finiteintrange" => unclaimed_label,
    "finiteintrangeconstant" => unclaimed_label,
    "font" => unclaimed_label,
    "geq" => unclaimed_label,
    "geqs" => unclaimed_label,
    "grammar" => unclaimed_label,
    "graphics" => parse_graphics,
    "greaterthan" => unclaimed_label,
    "greaterthanorequal" => unclaimed_label,
    "group" => unclaimed_label,
    "gt" => unclaimed_label,
    "gtp" => unclaimed_label,
    "gts" => unclaimed_label,
    "hlinitialMarking" => parse_hlinitialMarking,
    "hlinscription" => parse_hlinscription,
    "imply" => parse_imply,
    "include" => unclaimed_label,
    "inequality" => parse_inequality,
    "initialMarking" => parse_initialMarking,
    "input" => unclaimed_label,
    "inscription" => parse_inscription,
    "integer" => unclaimed_label,
    "interleave" => unclaimed_label,
    "label" => parse_label,
    "leq" => unclaimed_label,
    "leqs" => unclaimed_label,
    "lessthan" => unclaimed_label,
    "lessthanorequal" => unclaimed_label,
    "line" => unclaimed_label,
    "list" => unclaimed_label,
    "listappend" => unclaimed_label,
    "listconcatenation" => unclaimed_label,
    "listlength" => unclaimed_label,
    "lt" => unclaimed_label,
    "ltp" => unclaimed_label,
    "lts" => unclaimed_label,
    "makelist" => unclaimed_label,
    "memberatindex" => unclaimed_label,
    "mixed" => unclaimed_label,
    "mod" => unclaimed_label,
    "mulitsetsort" => parse_mulitsetsort,
    "mult" => unclaimed_label,
    "multisetsort" => unclaimed_label,
    "name" => parse_name,
    "namedoperator" => parse_namedoperator,
    "namedsort" => unclaimed_label,
    "natural" => unclaimed_label,
    "net" => parse_net,
    "not" => unclaimed_label,
    "not" => parse_not,
    "notAllowed" => unclaimed_label,
    "nsName" => unclaimed_label,
    "numberconstant" => unclaimed_label,
    "numberof" => unclaimed_label,
    "offset" => unclaimed_label,
    "oneOrMore" => unclaimed_label,
    "optional" => unclaimed_label,
    "or" => parse_or,
    "output" => unclaimed_label,
    "page"  => parse_page,
    "param" => unclaimed_label,
    "parameter" => unclaimed_label,
    "parentRef" => unclaimed_label,
    "partition" => unclaimed_label,
    "partitionelement" => unclaimed_label,
    "partitionelementof" => unclaimed_label,
    "place"  => parse_place,
    "pnml" => parse_pnml,
    "position" => unclaimed_label,
    "positive" => unclaimed_label,
    "predecessor" => unclaimed_label,
    "productsort" => parse_productsort,
    "ref" => unclaimed_label,
    "referencePlace"  => parse_refPlace,
    "referenceTransition"  => parse_refTransition,
    "sort" => parse_sort,
    "scalarproduct" => unclaimed_label,
    "start" => unclaimed_label,
    "string" => unclaimed_label,
    "stringappend" => unclaimed_label,
    "stringconcatenation" => unclaimed_label,
    "stringconstant" => unclaimed_label,
    "stringlength" => unclaimed_label,
    "structure" => parse_structure,
    "sublist"  => unclaimed_label,
    "substring" => unclaimed_label,
    "subterm" => unclaimed_label,
    "subtract" => unclaimed_label,
    "subtraction" => unclaimed_label,
    "successor" => unclaimed_label,
    "term" => parse_term, #TODO is this valid?
    "text" => parse_text,
    "tokengraphics"  => parse_tokengraphics,
    "tokenposition" => parse_tokenposition,
    "toolspecific"  => parse_toolspecific,
    "transition"  => parse_transition,
    "tuple" => parse_tuple,
    "type" => parse_type,
    "unparsed" => parse_unparsed,
    "useroperator" => parse_useroperator,
    "usersort" => parse_usersort,
    "value" => unclaimed_label,
    "variable" => parse_variable,
    "variabledecl" => parse_variabledecl,
    "zeroOrMore" => unclaimed_label,
)

